<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>web-codex</title>
    <style>
      /* Theme variables (default: dark) */
      :root {
        --bg: #0b1220;
        --text: #e6edf3;
        --header-bg: #0f172a;
        --border: #1f2937;
        --tag-bg: #1f2937;
        --tag-text: #9ca3af;
        --pane-bg: #0f172a;
        --tab-bg: #111827;
        --tab-active-bg: #1f2937;
        --repo-hover: #111827;
        --primary-bg: #2563eb;
        --secondary-bg: #1f2937;
        --secondary-text: #cbd5e1;
        --input-bg: #0b1220;
        --muted: #9ca3af;
        --link: #93c5fd;
        --mobile-bottom-bg: #0f172a;
        --badge-green-bg: #064e3b;
        --badge-red-bg: #7f1d1d;
        --badge-gray-bg: #374151;
        --danger-bg: #b91c1c;
        --danger-soft-bg: #7f1d1d;
        --danger-text: #ffffff;
        --danger-soft-text: #fecaca;
      }
      /* Light theme values when auto (no data-theme) and system prefers light */
      @media (prefers-color-scheme: light) {
        :root:not([data-theme]) {
          --bg: #f8fafc;
          --text: #0f172a;
          --header-bg: #ffffff;
          --border: #e5e7eb;
          --tag-bg: #eef2f7;
          --tag-text: #475569;
          --pane-bg: #ffffff;
          --tab-bg: #f1f5f9;
          --tab-active-bg: #e2e8f0;
          --repo-hover: #f1f5f9;
          --primary-bg: #2563eb;
          --secondary-bg: #f3f4f6;
          --secondary-text: #334155;
          --input-bg: #ffffff;
          --muted: #64748b;
          --link: #1d4ed8;
          --mobile-bottom-bg: #ffffff;
          --badge-green-bg: #dcfce7;
          --badge-red-bg: #fee2e2;
          --badge-gray-bg: #e5e7eb;
          --danger-bg: #dc2626;
          --danger-soft-bg: #fee2e2;
          --danger-text: #ffffff;
          --danger-soft-text: #991b1b;
        }
      }
      /* Explicit theme overrides */
      [data-theme="dark"] {
        --bg: #0b1220;
        --text: #e6edf3;
        --header-bg: #0f172a;
        --border: #1f2937;
        --tag-bg: #1f2937;
        --tag-text: #9ca3af;
        --pane-bg: #0f172a;
        --tab-bg: #111827;
        --tab-active-bg: #1f2937;
        --repo-hover: #111827;
        --primary-bg: #2563eb;
        --secondary-bg: #1f2937;
        --secondary-text: #cbd5e1;
        --input-bg: #0b1220;
        --muted: #9ca3af;
        --link: #93c5fd;
        --mobile-bottom-bg: #0f172a;
        --badge-green-bg: #064e3b;
        --badge-red-bg: #7f1d1d;
        --badge-gray-bg: #374151;
        --danger-bg: #b91c1c;
        --danger-soft-bg: #7f1d1d;
        --danger-text: #ffffff;
        --danger-soft-text: #fecaca;
      }
      [data-theme="light"] {
        --bg: #f8fafc;
        --text: #0f172a;
        --header-bg: #ffffff;
        --border: #e5e7eb;
        --tag-bg: #eef2f7;
        --tag-text: #475569;
        --pane-bg: #ffffff;
        --tab-bg: #f1f5f9;
        --tab-active-bg: #e2e8f0;
        --repo-hover: #f1f5f9;
        --primary-bg: #2563eb;
        --secondary-bg: #f3f4f6;
        --secondary-text: #334155;
        --input-bg: #ffffff;
        --muted: #64748b;
        --link: #1d4ed8;
        --mobile-bottom-bg: #ffffff;
        --badge-green-bg: #dcfce7;
        --badge-red-bg: #fee2e2;
        --badge-gray-bg: #e5e7eb;
        --danger-bg: #dc2626;
        --danger-soft-bg: #fee2e2;
        --danger-text: #ffffff;
        --danger-soft-text: #991b1b;
      }

      /* Styles using variables */
      body { font-family: ui-sans-serif, system-ui, sans-serif; margin: 0; background: var(--bg); color: var(--text); }
      header { padding: 12px 16px; background: var(--header-bg); border-bottom: 1px solid var(--border); display:flex; align-items:center; gap:12px; flex-wrap: wrap; }
      .breadcrumbs { display:flex; align-items:center; gap:8px; flex-wrap: wrap; }
      .breadcrumbs .crumb { font-weight: 600; color: var(--text); line-height: 1.2; }
      .breadcrumbs .crumb.root { cursor: pointer; }
      .breadcrumbs .crumb.chip { display:inline-flex; align-items:center; gap:6px; background: var(--tab-bg); border:1px solid var(--border); border-radius: 999px; padding:6px 10px; }
      .breadcrumbs .crumb.current { color: var(--muted); cursor: default; }
      .breadcrumbs .crumb.clickable { cursor: pointer; }
      .breadcrumbs .crumb.clickable:hover { color: var(--link); }
      .breadcrumbs .crumb.chip:hover { border-color: var(--primary-bg); }
      .breadcrumbs .divider { color: var(--muted); font-size: 12px; }
      .tag { background: var(--tag-bg); padding:4px 8px; border-radius: 8px; font-size: 12px; color: var(--tag-text);}
      .container { padding: 16px; }
      .row { display:flex; gap:16px; }
      .col { flex:1; min-width: 0; }
      .pane { background: var(--pane-bg); border:1px solid var(--border); border-radius: 12px; padding:12px; }
      button { background: var(--primary-bg); border:none; color:white; padding:8px 10px; border-radius:8px; cursor:pointer; }
      button.secondary { background: var(--secondary-bg); color: var(--secondary-text); }
      button.danger { background: var(--danger-bg); color: var(--danger-text); }
      button.secondary.danger { background: var(--danger-soft-bg); color: var(--danger-soft-text); }
      button.icon { width: 36px; height: 36px; display: inline-flex; align-items: center; justify-content: center; padding: 0; }
      button.icon.active { background: var(--tab-active-bg); }
      select, textarea, input { background: var(--input-bg); color: var(--text); border:1px solid var(--border); border-radius:8px; padding:6px; width:100%; }
      textarea { min-height: 120px; }
      .tabs { display:flex; gap:4px; margin-bottom: 8px; padding: 0 6px; border-bottom: 1px solid var(--border); overflow-x: auto; flex-wrap: nowrap; }
      .tab { appearance: none; border: 1px solid transparent; border-bottom: none; border-radius: 12px 12px 0 0; background: var(--tab-bg); color: var(--muted); padding: 10px 12px; cursor:pointer; transition: color 140ms ease, background 140ms ease, border-color 140ms ease, box-shadow 140ms ease; display: inline-flex; align-items: center; gap: 8px; position: relative; top: 1px; white-space: nowrap; }
      .tab:hover { background: var(--tab-active-bg); border-color: var(--border); color: var(--text); }
      .tab:focus-visible { outline: 2px solid var(--primary-bg); outline-offset: 2px; }
      .tab.active { background: var(--pane-bg); border-color: var(--border); border-bottom: 1px solid var(--pane-bg); box-shadow: 0 -1px 0 var(--pane-bg), 0 2px 0 var(--pane-bg); color: var(--text); z-index: 1; }
      .tab::after { content: ""; position: absolute; left: 12px; right: 12px; bottom: -1px; height: 3px; border-radius: 999px 999px 0 0; background: transparent; transition: background 160ms ease; }
      .tab.active::after { background: var(--primary-bg); }
      .tab .tag { background: var(--tab-bg); color: var(--muted); }
      .tab.active .tag { background: var(--primary-bg); color: #fff; }
      .tab-label { display: inline-flex; align-items: center; gap: 6px; font-weight: 600; }
      .tab-provider { text-transform: capitalize; }
      .tab-divider { color: var(--muted); }
      .tab-key { color: var(--text); }
      .repo { padding:8px; border-bottom:1px dashed var(--border); display:flex; justify-content:space-between; align-items:center; gap:8px; border-radius:8px; }
      .repo:hover { background: var(--repo-hover); }
      .muted { color: var(--muted); font-size:12px; }
      code.diff { white-space: pre; display:block; overflow:auto; max-height: 50vh; background: var(--input-bg); border:1px solid var(--border); border-radius:8px; padding:12px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px; line-height: 1.35; }
      /* Ensure terminal never forces flex columns to overflow */
      .term { width: 100%; overflow: hidden; }
      .term .xterm, .term .xterm-rows, .term .xterm-screen, .term .xterm-viewport { max-width: 100% !important; }
      /* Pretty diff (diff2html) smaller font as well */
      .d2h-wrapper { font-size: 12px; }
      a { color: var(--link); }
    
      /* Responsive enhancements */
      .actions { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
      @media (max-width: 820px) {
        .container { padding: 12px; }
        .row { flex-direction: column; gap: 12px; }
        .pane { padding: 10px; border-radius: 10px; }
        .tabs { overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
        .tab { display: inline-flex; }
        button, select, input, textarea { font-size: 16px; } /* prevent iOS zoom */
        code.diff { max-height: 40vh; font-size: 11px; }
        .d2h-wrapper { font-size: 11px; }
        .term { height: 60vh; width: 100%; }
      }
      @media (min-width: 821px) {
        code.diff { max-height: 60vh; }
        .term { height: 75vh; width: 100%; }
        /* Desktop layout: place CLI (cli-col) on the left, everything else (main-col) on the right */
        .cli-col { order: 0; min-width: 0; }
        .main-col { order: 1; min-width: 0; }
      }

      /* Bottom nav for mobile */
      .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: var(--mobile-bottom-bg); border-top:1px solid var(--border); display:flex; }
      .bottom-nav button { flex:1; padding:12px; border-radius:0; }
      @media (min-width: 821px) { .bottom-nav { display:none; } }

      .badge { font-size:12px; padding:2px 6px; border-radius:6px; border:1px solid var(--border); margin-left:6px; }
      .badge.green { background: var(--badge-green-bg); }
      .badge.red { background: var(--badge-red-bg); }
      .badge.gray { background: var(--badge-gray-bg); }
      .badge.interactive { cursor: pointer; user-select: none; }
      .badge.selected { box-shadow: 0 0 0 2px var(--primary-bg) inset; }

      /* Commits list: fixed height with scroll */
      .commit-list { max-height: 320px; overflow: auto; padding-right: 4px; }

      /* Copy button feedback */
      @keyframes pop {
        0% { transform: scale(1); }
        50% { transform: scale(1.06); }
        100% { transform: scale(1); }
      }
      button.secondary.copied {
        background: var(--primary-bg);
        color: #fff;
        animation: pop 200ms ease-out;
      }

      /* Loading spinner used in action buttons */
      @keyframes spin { to { transform: rotate(360deg); } }
      .spinner {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        border: 2px solid rgba(255,255,255,0.25);
        border-top-color: #fff;
        display: inline-block;
        vertical-align: -2px;
        margin-right: 8px;
        animation: spin 0.9s linear infinite;
      }

    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
